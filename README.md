@[toc]
# ä¸€ã€ä»€ä¹ˆæ˜¯react
**React**[<sup>1</sup>](#refer-1)[<sup>2</sup>](#refer-1) èµ·æºäº **Facebook** çš„å†…éƒ¨é¡¹ç›®ï¼Œå› ä¸ºè¯¥å…¬å¸å¯¹å¸‚åœºä¸Šæ‰€æœ‰ **JavaScript MVC**æ¡†æ¶ï¼Œéƒ½ä¸æ»¡æ„ï¼Œå°±å†³å®šè‡ªå·±å†™ä¸€å¥—ï¼Œç”¨æ¥æ¶è®¾Instagram çš„ç½‘ç«™ã€‚åšå‡ºæ¥ä»¥åï¼Œå‘ç°è¿™å¥—ä¸œè¥¿å¾ˆå¥½ç”¨ï¼Œå°±åœ¨**2013å¹´5æœˆ**å¼€æºäº†ã€‚

ç”±äº **React**çš„è®¾è®¡æ€æƒ³æå…¶ç‹¬ç‰¹ï¼Œå±äºé©å‘½æ€§åˆ›æ–°ï¼Œæ€§èƒ½å‡ºä¼—ï¼Œä»£ç é€»è¾‘å´éå¸¸ç®€å•ã€‚æ‰€ä»¥ï¼Œè¶Šæ¥è¶Šå¤šçš„äººå¼€å§‹å…³æ³¨å’Œä½¿ç”¨ï¼Œè®¤ä¸ºå®ƒå¯èƒ½æ˜¯å°†æ¥ **Web** å¼€å‘çš„ä¸»æµå·¥å…·ã€‚
è¿™ä¸ªé¡¹ç›®æœ¬èº«ä¹Ÿè¶Šæ»šè¶Šå¤§ï¼Œä»æœ€æ—©çš„**UI**å¼•æ“å˜æˆäº†ä¸€æ•´å¥—å‰åç«¯é€šåƒçš„ **Web App** è§£å†³æ–¹æ¡ˆã€‚è¡ç”Ÿçš„ **React Native** é¡¹ç›®ï¼Œç›®æ ‡æ›´æ˜¯å®ä¼Ÿï¼Œå¸Œæœ›ç”¨å†™ **Web App** çš„æ–¹å¼å»å†™ **Native App**ã€‚å¦‚æœèƒ½å¤Ÿå®ç°ï¼Œæ•´ä¸ªäº’è”ç½‘è¡Œä¸šéƒ½ä¼šè¢«é¢ è¦†ï¼Œå› ä¸ºåŒä¸€ç»„äººåªéœ€è¦å†™ä¸€æ¬¡ UI ï¼Œå°±èƒ½åŒæ—¶è¿è¡Œåœ¨æœåŠ¡å™¨ã€æµè§ˆå™¨å’Œæ‰‹æœºã€‚
**React**ä¸»è¦ç”¨äºæ„å»º**UI**ã€‚ä½ å¯ä»¥åœ¨**React**é‡Œä¼ é€’å¤šç§ç±»å‹çš„å‚æ•°ï¼Œå¦‚å£°æ˜ä»£ç ï¼Œå¸®åŠ©ä½ æ¸²æŸ“å‡º**UI**ã€ä¹Ÿå¯ä»¥æ˜¯é™æ€çš„**HTML DOM**å…ƒç´ ã€ä¹Ÿå¯ä»¥ä¼ é€’åŠ¨æ€å˜é‡ã€ç”šè‡³æ˜¯å¯äº¤äº’çš„åº”ç”¨ç»„ä»¶ã€‚
ç‰¹ç‚¹ï¼š
1.å£°æ˜å¼è®¾è®¡ï¼š**React**é‡‡ç”¨å£°æ˜èŒƒå¼ï¼Œå¯ä»¥è½»æ¾æè¿°åº”ç”¨ã€‚
2.é«˜æ•ˆï¼š**React**é€šè¿‡å¯¹**DOM**çš„æ¨¡æ‹Ÿï¼Œæœ€å¤§é™åº¦åœ°å‡å°‘ä¸**DOM**çš„äº¤äº’ã€‚
3.çµæ´»ï¼š**React**å¯ä»¥ä¸å·²çŸ¥çš„åº“æˆ–æ¡†æ¶å¾ˆå¥½åœ°é…åˆã€‚




# äºŒã€ä»€ä¹ˆæ˜¯dva
**dva** [<sup>3</sup>](#refer-3)é¦–å…ˆæ˜¯ä¸€ä¸ªåŸºäº **redux** å’Œ **redux-saga** çš„æ•°æ®æµæ–¹æ¡ˆï¼Œç„¶åä¸ºäº†ç®€åŒ–å¼€å‘ä½“éªŒï¼Œ**dva**  è¿˜é¢å¤–å†…ç½®äº† **react-router** å’Œ **fetch**ï¼Œæ‰€ä»¥ä¹Ÿå¯ä»¥ç†è§£ä¸ºä¸€ä¸ªè½»é‡çº§çš„åº”ç”¨æ¡†æ¶ã€‚
**ç‰¹æ€§**
- æ˜“å­¦æ˜“ç”¨ï¼Œä»…æœ‰ **6 ä¸ª api**ï¼Œå¯¹ **redux** ç”¨æˆ·å°¤å…¶å‹å¥½ï¼Œé…åˆ umi ä½¿ç”¨åæ›´æ˜¯é™ä½ä¸º **0 API**
- elm æ¦‚å¿µï¼Œé€šè¿‡ **reducers, effects** å’Œ **subscriptions** ç»„ç»‡ **model**
- æ’ä»¶æœºåˆ¶ï¼Œæ¯”å¦‚ **dva-loading** å¯ä»¥è‡ªåŠ¨å¤„ç† **loading çŠ¶æ€**ï¼Œä¸ç”¨ä¸€ééåœ°å†™ **showLoading å’Œ hideLoading**
- æ”¯æŒ **HMR**ï¼ˆçƒ­åŠ è½½ï¼‰ï¼ŒåŸºäº **babel-plugin-dva-hmr**å®ç° **componentsã€routes å’Œ models çš„ HMR**

ç®€å•æ¥è¯´dvaå°±æ˜¯è¿™ä¸ªå›¢é˜Ÿè§‰å¾—redux+redux-sageè¿™ä¸€å¥—æ•°æ®æµå¤ªéº»çƒ¦ï¼Œå°†è¿™äº›æ•´åˆå°è£…æˆäº†ä¸€ä¸ªæœ€ä½³ä½“éªŒæ¨¡å¼ï¼ˆä¹Ÿå°±æ˜¯æœ€æ–¹ä¾¿å¼€å‘ä½¿ç”¨ï¼‰æä¾›å¼€å‘è€…ä½¿ç”¨



# ä¸‰ã€ä»€ä¹ˆæ˜¯umi
Umi [<sup>4</sup>](#refer-4)ï¼Œä¸­æ–‡å¯å‘éŸ³ä¸ºä¹Œç±³ï¼Œæ˜¯å¯æ‰©å±•çš„ä¼ä¸šçº§å‰ç«¯åº”ç”¨æ¡†æ¶ã€‚Umi ä»¥è·¯ç”±ä¸ºåŸºç¡€çš„ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼Œä¿è¯è·¯ç”±çš„åŠŸèƒ½å®Œå¤‡ï¼Œå¹¶ä»¥æ­¤è¿›è¡ŒåŠŸèƒ½æ‰©å±•ã€‚ç„¶åé…ä»¥ç”Ÿå‘½å‘¨æœŸå®Œå–„çš„æ’ä»¶ä½“ç³»ï¼Œè¦†ç›–ä»æºç åˆ°æ„å»ºäº§ç‰©çš„æ¯ä¸ªç”Ÿå‘½å‘¨æœŸï¼Œæ”¯æŒå„ç§åŠŸèƒ½æ‰©å±•å’Œä¸šåŠ¡éœ€æ±‚ã€‚

Umi æ˜¯èš‚èšé‡‘æœçš„åº•å±‚å‰ç«¯æ¡†æ¶ï¼Œå·²ç›´æ¥æˆ–é—´æ¥åœ°æœåŠ¡äº† 3000+ åº”ç”¨ï¼ŒåŒ…æ‹¬ javaã€nodeã€H5 æ— çº¿ã€ç¦»çº¿ï¼ˆHybridï¼‰åº”ç”¨ã€çº¯å‰ç«¯ assets åº”ç”¨ã€CMS åº”ç”¨ç­‰ã€‚ä»–å·²ç»å¾ˆå¥½åœ°æœåŠ¡äº†æˆ‘ä»¬çš„å†…éƒ¨ç”¨æˆ·ï¼ŒåŒæ—¶å¸Œæœ›ä»–ä¹Ÿèƒ½æœåŠ¡å¥½å¤–éƒ¨ç”¨æˆ·ã€‚

å®ƒä¸»è¦å…·å¤‡ä»¥ä¸‹åŠŸèƒ½ï¼š

- ğŸ‰ å¯æ‰©å±•ï¼ŒUmi å®ç°äº†å®Œæ•´çš„ç”Ÿå‘½å‘¨æœŸï¼Œå¹¶ä½¿å…¶æ’ä»¶åŒ–ï¼ŒUmi å†…éƒ¨åŠŸèƒ½ä¹Ÿå…¨ç”±æ’ä»¶å®Œæˆã€‚æ­¤å¤–è¿˜æ”¯æŒæ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥æ»¡è¶³åŠŸèƒ½å’Œå‚ç›´åŸŸçš„åˆ†å±‚éœ€æ±‚ã€‚
- ğŸ“¦ å¼€ç®±å³ç”¨ï¼ŒUmi å†…ç½®äº†è·¯ç”±ã€æ„å»ºã€éƒ¨ç½²ã€æµ‹è¯•ç­‰ï¼Œä»…éœ€ä¸€ä¸ªä¾èµ–å³å¯ä¸Šæ‰‹å¼€å‘ã€‚å¹¶ä¸”è¿˜æä¾›é’ˆå¯¹ React çš„é›†æˆæ’ä»¶é›†ï¼Œå†…æ¶µä¸°å¯Œçš„åŠŸèƒ½ï¼Œå¯æ»¡è¶³æ—¥å¸¸ 80% çš„å¼€å‘éœ€æ±‚ã€‚
- ğŸ  ä¼ä¸šçº§ï¼Œç»èš‚èšå†…éƒ¨ 3000+ é¡¹ç›®ä»¥åŠé˜¿é‡Œã€ä¼˜é…·ã€ç½‘æ˜“ã€é£çŒªã€å£ç¢‘ç­‰å…¬å¸é¡¹ç›®çš„éªŒè¯ï¼Œå€¼å¾—ä¿¡èµ–ã€‚
- ğŸš€ å¤§é‡è‡ªç ”ï¼ŒåŒ…å«å¾®å‰ç«¯ã€ç»„ä»¶æ‰“åŒ…ã€æ–‡æ¡£å·¥å…·ã€è¯·æ±‚åº“ã€hooks åº“ã€æ•°æ®æµç­‰ï¼Œæ»¡è¶³æ—¥å¸¸é¡¹ç›®çš„å‘¨è¾¹éœ€æ±‚ã€‚
- ğŸŒ´ å®Œå¤‡è·¯ç”±ï¼ŒåŒæ—¶æ”¯æŒé…ç½®å¼è·¯ç”±å’Œçº¦å®šå¼è·¯ç”±ï¼ŒåŒæ—¶ä¿æŒåŠŸèƒ½çš„å®Œå¤‡æ€§ï¼Œæ¯”å¦‚åŠ¨æ€è·¯ç”±ã€åµŒå¥—è·¯ç”±ã€æƒé™è·¯ç”±ç­‰ç­‰ã€‚
- ğŸš„ é¢å‘æœªæ¥ï¼Œåœ¨æ»¡è¶³éœ€æ±‚çš„åŒæ—¶ï¼Œæˆ‘ä»¬ä¹Ÿä¸ä¼šåœæ­¢å¯¹æ–°æŠ€æœ¯çš„æ¢ç´¢ã€‚æ¯”å¦‚ dll æé€Ÿã€modern modeã€webpack@5ã€è‡ªåŠ¨åŒ–åŒ– externalã€bundler less ç­‰ç­‰ã€‚
## ä»€ä¹ˆæ—¶å€™ä¸ç”¨ umiï¼Ÿ
å¦‚æœä½ ï¼Œ

- éœ€è¦æ”¯æŒ IE 8 æˆ–æ›´ä½ç‰ˆæœ¬çš„æµè§ˆå™¨
- éœ€è¦æ”¯æŒ React 16.8.0 ä»¥ä¸‹çš„ React
- éœ€è¦è·‘åœ¨ Node 10 ä»¥ä¸‹çš„ç¯å¢ƒä¸­
- æœ‰å¾ˆå¼ºçš„ webpack è‡ªå®šä¹‰éœ€æ±‚å’Œä¸»è§‚æ„æ„¿
- éœ€è¦é€‰æ‹©ä¸åŒçš„è·¯ç”±æ–¹æ¡ˆ

Umi å¯èƒ½ä¸é€‚åˆä½ ã€‚

# å››ã€ä»€ä¹ˆæ˜¯antd
antd  [<sup>[5]</sup>](#refer-5)æ˜¯åŸºäº Ant Design è®¾è®¡ä½“ç³»çš„ React UI ç»„ä»¶åº“ï¼Œä¸»è¦ç”¨äºç ”å‘ä¼ä¸šçº§ä¸­åå°äº§å“ã€‚
**ç‰¹æ€§**
- ğŸŒˆ æç‚¼è‡ªä¼ä¸šçº§ä¸­åå°äº§å“çš„äº¤äº’è¯­è¨€å’Œè§†è§‰é£æ ¼ã€‚

- ğŸ“¦ å¼€ç®±å³ç”¨çš„é«˜è´¨é‡ React ç»„ä»¶ã€‚

- ğŸ›¡ ä½¿ç”¨ TypeScript å¼€å‘ï¼Œæä¾›å®Œæ•´çš„ç±»å‹å®šä¹‰æ–‡ä»¶ã€‚

- âš™ï¸ å…¨é“¾è·¯å¼€å‘å’Œè®¾è®¡å·¥å…·ä½“ç³»ã€‚

- ğŸŒ æ•°åä¸ªå›½é™…åŒ–è¯­è¨€æ”¯æŒã€‚

- ğŸ¨ æ·±å…¥æ¯ä¸ªç»†èŠ‚çš„ä¸»é¢˜å®šåˆ¶èƒ½åŠ›ã€‚

**æ”¯æŒç¯å¢ƒ**
- ç°ä»£æµè§ˆå™¨å’Œ IE11 åŠä»¥ä¸Šï¼ˆéœ€è¦ polyfillsï¼‰ã€‚
- æ”¯æŒæœåŠ¡ç«¯æ¸²æŸ“ã€‚
- Electron

<div id="refer-1"></div>

- [1] [ç™¾åº¦ç™¾ç§‘reactä»‹ç»](https://baike.baidu.com/item/react/18077599?fr=aladdin)
<div id="refer-2"></div>

- [2] [reactå®˜ç½‘](https://react.docschina.org/)

<div id="refer-3"></div>

- [3] [dvaå®˜ç½‘](https://dvajs.com/)

<div id="refer-4"></div>

- [4] [umiå®˜ç½‘](https://umijs.org/zh-CN)
<div id="refer-5"></div>

- [5] [antdå®˜ç½‘](https://ant.design/index-cn)


# å…­ã€å¼€å§‹ä½¿ç”¨è„šæ‰‹æ¶åˆ›å»ºé¡¹ç›®
é¦–å…ˆä¿è¯ç”µè„‘ä¸Šæœ‰nodeç¯å¢ƒï¼Œè¿™ä¸ªå°±ä¸è¯´äº†

æœ¬æ•™ç¨‹ä½¿ç”¨yarnä¹Ÿæ˜¯umiæ¨èçš„ä¾èµ–ç®¡ç†å·¥å…·

 **1. ç¬¬ä¸€æ­¥å®‰è£…umiå…¨å±€ä¾èµ–**


```
$yarn global add umi
$umi -v
umi@3.0.9
```
æˆåŠŸå®‰è£…umiä¾èµ–

umiå‡çº§æˆ3.0äº†ï¼Œæ‰‹è„šæ¶åˆ›å»ºé¡¹ç›®ä¸ä»¥å‰ä¸ä¸€æ ·äº†
 **2. æ–°å»ºä¸€ä¸ªæ–‡ä»¶å¤¹ï¼Œå¹¶åœ¨ç»ˆç«¯æ‰“å¼€ï¼Œå¹¶åˆ›å»ºé¡¹ç›®**
```
$ mkdir myapp && cd myapp
$ yarn create @umijs/umi-app
```
æ­¤æ—¶æ‰‹è„šæ¶åœ¨è¯¥æ–‡ä»¶å¤¹ä¸‹ä¼šåˆ›å»ºè¿™äº›æ–‡ä»¶

> Copy:  .editorconfig
Write: .gitignore
Copy:  .prettierignore
Copy:  .prettierrc
Write: .umirc.ts
Copy:  mock/.gitkeep
Write: package.json
Copy:  README.md
Copy:  src/pages/index.less
Copy:  src/pages/index.tsx
Copy:  tsconfig.json
Copy:  typings.d.ts


éœ€è¦æŸ¥çœ‹éšè—æ–‡ä»¶æ‰èƒ½çœ‹åˆ°"."å¼€å¤´çš„æ–‡ä»¶,ubuntuæŸ¥çœ‹éšè—æ–‡ä»¶å¿«æ·é”®ä¸ºctrl+hï¼ŒmacOså¥½åƒæ˜¯command+shift+.å¿˜è®°äº†ã€‚

**3.ä½¿ç”¨yarnå®‰è£…ä¾èµ–**

    $ yarn
    yarn install v1.21.1
    [1/4] ğŸ”  Resolving packages...
    success Already up-to-date.
    âœ¨  Done in 0.71s.

å¯åŠ¨é¡¹ç›®

    $ yarn start

> Starting the development server...
> 
> âœ” Webpack   Compiled successfully in 17.84s
> 
>  DONE  Compiled successfully in 17842ms                               
> 8:06:31 PM
> 
> 
>   App running at:
>   - Local:   http://localhost:8000 (copied to clipboard)
>   - Network: http://192.168.xx.xxx:8000

**4.åœ¨æµè§ˆå™¨é‡Œæ‰“å¼€ http://localhost:8000/ï¼Œèƒ½çœ‹åˆ°ä»¥ä¸‹ç•Œé¢ï¼š**

![success](https://images.gitbook.cn/00cecfe0-67fa-11ea-95be-6b413411e120)
æ­¤æ—¶ï¼Œä½ çš„umié¡¹ç›®çš„ç›®å½•æ˜¯è¿™æ ·çš„ï¼š

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/101942e0-681e-11ea-8c29-8dcac0ed3a89)
 - mockæ–‡ä»¶å¤¹æ˜¯ç”¨æ¥å†™å‰ç«¯mockæ•°æ®çš„ï¼Œæ­¤ç›®å½•ä¸‹æ‰€æœ‰ js å’Œ ts æ–‡ä»¶ä¼šè¢«è§£æä¸º mock æ–‡ä»¶ã€‚
 - node_modulesæ˜¯é¡¹ç›®æ‰€æœ‰ä¾èµ–çš„åŒ…
 - **src**
	- .umiæ˜¯ä¸´æ—¶æ–‡ä»¶ç›®å½•ï¼Œæ¯”å¦‚å…¥å£æ–‡ä»¶ã€è·¯ç”±ç­‰ï¼Œéƒ½ä¼šè¢«ä¸´æ—¶ç”Ÿæˆåˆ°è¿™é‡Œã€‚ä¸è¦æäº¤ .umi ç›®å½•åˆ° git ä»“åº“ï¼Œä»–ä»¬ä¼šåœ¨ umi dev å’Œ umi build æ—¶è¢«åˆ é™¤å¹¶é‡æ–°ç”Ÿæˆã€‚
	- pagesç›®å½•æ‰€æœ‰è·¯ç”±ç»„ä»¶å­˜æ”¾åœ¨è¿™é‡Œã€‚
	- .editorconfig ç¼–è¾‘å™¨çš„è®¾ç½®
	- .gitignore ä½¿ç”¨gitæ—¶ä¸éœ€è¦gitç»´æŠ¤çš„å†…å®¹è®¾ç½®
	- prettierignore package.jsonä¸­æœ‰æ’ä»¶prettierï¼Œè¿™æ˜¯prettierä»£ç ç¾åŒ–å·¥å…·ä¸éœ€è¦å…³ç³»çš„æ–‡ä»¶è®¾ç½®
	- prettierrc prettierä»£ç ç¾åŒ–è§„åˆ™
	- .umirc.ts umiæ¡†æ¶çš„é…ç½®
	- package.json åŒ…å«æ’ä»¶å’Œæ’ä»¶é›†ï¼Œä»¥ @umijs/preset-ã€@umijs/plugin-ã€umi-preset- å’Œ umi-plugin- å¼€å¤´çš„ä¾èµ–ä¼šè¢«è‡ªåŠ¨æ³¨å†Œä¸ºæ’ä»¶æˆ–æ’ä»¶é›†ã€‚
	- readmeä¸è¯´äº†
	- tsconfig.json æŒ‡å®štsç¼–è¯‘çš„ä¸€äº›å‚æ•°ä¿¡æ¯
	- typings.d.ts  å˜é‡ä¸€ç³»åˆ—çš„ç”³æ˜æ–‡ä»¶

## umiçš„é…ç½®é¡¹ï¼š
æ‰“å¼€**.umirc.ts**æ–‡ä»¶
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/6382a780-682f-11ea-a2b2-ed1a3abdd313)
çœ‹åˆ°çš„é…ç½®æ˜¯è¿™æ ·çš„ï¼ŒdefineConfigæ˜¯umiçš„ä¸€ä¸ªå‡½æ•°ï¼Œåº”è¯¥æ˜¯é¢„ç•™çš„ç›®å‰æ²¡ä»€ä¹ˆç”¨ï¼Œç›´æ¥returnäº†è¿™ä¸ªä¼ å…¥çš„å¯¹è±¡ï¼Œæˆ‘ä»¬æ¥æ”¹é€ ä¸€ä¸‹ï¼Œè·Ÿè¸ªåˆ°definConfigå‡½æ•°ä¸­æˆ‘ä»¬çœ‹åˆ°ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/c46fe300-682f-11ea-a7c2-3da1737284e9)
tså®šä¹‰ä¼ å…¥çš„å¯¹è±¡ç±»å‹ä¸ºIconfigï¼Œè¿”å›ç±»å‹ä¸ºIconfigï¼Œåœ¨æºç ä¸­æ˜¯ç›´æ¥returnäº†ã€‚æ‰€ä»¥æˆ‘ä»¬ä¸ºäº†æ›´å¥½çš„ç†è§£ï¼Œæˆ‘ä»¬å°†.umirc.tsæ”¹å†™ä¸ºè¿™æ ·

```js
import { defineConfig } from 'umi';
import { IConfig } from '@umijs/types';
const config: IConfig = {
  routes: [{ path: '/', component: '@/pages/index' }],
};
export default defineConfig(config);


```
è¿™ä¸ªå’ŒåŸæ¥çš„æ²¡æœ‰åŒºåˆ«ï¼Œæ›´å¥½ç†è§£è€Œå·²ã€‚
æ¥ä¸‹æ¥æˆ‘ä»¬è·Ÿè¸ªåˆ°IConfigä¸­ï¼Œçœ‹é…ç½®å±æ€§ï¼š
```js
export interface IConfig extends IConfigCore {
  alias?: {
    [key: string]: string;
  };
  analyze?: BundleAnalyzerPlugin.Options;
  autoprefixer?: object;
  base?: string;
  chainWebpack?: {
    (
      memo: WebpackChain,
      args: {
        webpack: typeof webpack;
        env: env;
        createCSSRule: ICreateCSSRule;
      },
    ): void;
  };
  chunks?: string[];
  cssLoader?: object;
  cssnano?: object;
  copy?: string[];
  define?: {
    [key: string]: any;
  };
  devServer?: IServerOpts;
  devtool?: webpack.Options.Devtool;
  dynamicImport?: {
    loading?: string;
  };
  exportStatic?: {
    htmlSuffix?: boolean;
    dynamicRoot?: boolean;
  };
  externals?: any;
  extraBabelPlugins?: IPresetOrPlugin[];
  extraBabelPresets?: IPresetOrPlugin[];
  extraPostCSSPlugins?: any[];
  favicon?: string;
  forkTSCheker?: object;
  hash?: boolean;
  headScripts?: IScriptConfig;
  history?: {
    type: 'browser' | 'hash' | 'memory';
    options?: object;
  };
  ignoreMomentLocale?: boolean;
  inlineLimit?: number;
  lessLoader?: object;
  links?: Partial<HTMLLinkElement>[];
  manifest?: Partial<IManifest>;
  metas?: Partial<HTMLMetaElement>[];
  mock?:
    | {
        exclude?: string[];
      }
    | false;
  mountElementId?: string;
  outputPath?: string;
  plugins?: IPresetOrPlugin[];
  postcssLoader?: object;
  presets?: IPresetOrPlugin[];
  proxy?: any;
  publicPath?: string;
  runtimePublicPath?: boolean;
  scripts?: IScriptConfig;
  singular?: boolean;
  ssr?: object;
  styleLoader?: object;
  styles?: IStyleConfig;
  targets?: ITargets;
  terserOptions?: object;
  theme?: object;
  title?: string;
  [key: string]: any;
}
```

> è¿™äº›å±æ€§è‡ªå·±å»æ ¹æ®umiå®˜ç½‘ä¸Šçš„é…ç½®é¡¹è¯´æ˜ï¼Œæ ¹æ®è‡ªå·±éœ€æ±‚è‡ªç”±æ·»åŠ ï¼Œåœ°å€æ˜¯https://umijs.org/zh-CN/configï¼Œä¸å¤šè¯´äº†ã€‚

# ä¸ƒã€å¼€å§‹ç¼–å†™é¡µé¢
## routeræå–
åœ¨æ ¹ç›®å½•åˆ›å»ºconfigæ–‡ä»¶å¤¹ï¼Œåˆ›å»ºrouter.comfig.tsæ–‡ä»¶
æ’å…¥ä»£ç ï¼š
```js
import { IRoute } from 'umi-types';

const routes: IRoute[] = [{ path: '/', component: '@/pages/index' }];

export default routes;

```
å‘ç°æ²¡æœ‰umi-typesä¾èµ–åŒ…ï¼Œyarnåœ¨å¼€å‘ç¯å¢ƒä¸­ï¼Œç”Ÿäº§ç¯å¢ƒä¸éœ€è¦çš„

	$yarn add umi-types --dev 
	
å°†.umirc.tsä¸­æ”¹æˆå¼•ç”¨router
```js
import { defineConfig } from 'umi';
import pageRoutes from './config/router.config';
import { IConfig } from 'umi-types';
const config: IConfig = {
  routes: pageRoutes,
};

export default defineConfig(config);
```
è¿™ä¹ˆåšé˜²æ­¢ä»¥årouter	è¿‡å¤šï¼Œæ‹†å°æˆä¸€ä¸ªæ–‡ä»¶å•ç‹¬ç®¡ç†

## é¡¹ç›®çš„æ‹“å±•å·¥ä½œ
åœ¨**SRC**æ–‡ä»¶å¤¹ä¸‹åˆ›å»ºå¤šä¸ªæ–‡ä»¶å¤¹ï¼Œæ‹†åˆ†ç»„ä»¶ã€modelã€å·¥å…·ç±»ç­‰ï¼Œå†æ·»åŠ **global.less**æ–‡ä»¶å…¨å±€ä½¿ç”¨çš„æ ·å¼ã€‚
åˆ›å»ºå®Œåé¡¹ç›®ç›®å½•ç»“æ„æ˜¯è¿™æ ·çš„ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/70f2a410-8300-11ea-bced-d975e1287828)
## ç¼–å†™é¡µé¢demo

1.æˆ‘ä»¬å…ˆå°†umiä¸­çš„é¡µé¢çš„demoå¤åˆ¶ç²˜è´´è¿›æ¥çœ‹çœ‹æ•ˆæœ
æ‰“å¼€pagesä¸‹çš„index.tsxæ–‡ä»¶
å°†ä»£ç æ›¿æ¢ï¼Œæˆ‘å°†æˆ‘ä¸ªäººç†è§£çš„æ³¨é‡Šéƒ½å†™åœ¨ä»£ç é‡Œé¢äº†
```js
import React, { FC } from 'react';
import { IndexModelState, ConnectProps, Loading, connect } from 'umi';
/*
  connectå°±æ˜¯react-reduxä¸­çš„connectï¼Œumiç›´æ¥importï¼Œexportå‡ºæ¥çš„
  IndexModelStateæ˜¯åœ¨modelä¸­exportçš„æ•°æ®ç±»å‹ï¼Œåœ¨ä¸‹æ–¹æ•°æ®ç»‘å®šåˆ°ç»„ä»¶æ‰èƒ½å–åˆ°
  ConnectPropsæ˜¯é¡µé¢ä¼ å…¥çš„ç±»å‹åŒ…å«dispatchï¼Œmatchï¼Œlocationï¼Œhistoryï¼Œrouteç†Ÿæ‚‰reactçš„äººéƒ½çŸ¥é“ä¸è§£é‡Šäº†
  Loadingæ˜¯dvaå°è£…çš„modelå¼‚æ­¥æ–¹æ³•è°ƒç”¨çŠ¶æ€ï¼Œæ‰§è¡Œä¸­ä¸ºtrueï¼Œå¦åˆ™ä¸ºfalseï¼Œä¸ºç•Œé¢åŠ è½½ä¸­çš„çŠ¶æ€ä½¿ç”¨
*/

//å®šä¹‰å½“å‰é¡µé¢çš„propsï¼Œç»§æ‰¿ConnectPropsï¼Œå†æ·»åŠ ä¸¤ä¸ªå±æ€§ï¼Œmodelä¸­çš„æ•°æ®ä»¥åŠloadingçŠ¶æ€
interface PageProps extends ConnectProps {
  index: IndexModelState;
  loading: boolean;
}

/*
  é¡µé¢ç»„ä»¶ï¼ŒFCæ˜¯åœ¨reactä¸­å®šä¹‰çš„type FC<P = {}> = FunctionComponent<P>ï¼Œè¡¨ç¤ºIndexPageæ˜¯ä¸€ä¸ªæ–¹æ³•ç»„ä»¶ã€‚
  FunctionComponentåˆæ˜¯ä»€ä¹ˆï¼Ÿ

  interface FunctionComponent<P = {}> {
        (props: PropsWithChildren<P>, context?: any): ReactElement<any, any> | null;
        propTypes?: WeakValidationMap<P>;
        contextTypes?: ValidationMap<any>;
        defaultProps?: Partial<P>;
        displayName?: string;
    }
    æ–‡ä»¶è·Ÿè¸ªä¸‹å»å¤ªå¤šäº†ï¼Œå°±åˆ°è¿™å§
  æ³›å‹ä¸ºPagePropsè¡¨ç¤ºé¡µé¢ä¼ å…¥çš„å‚æ•°ç±»å‹
  return é¡µé¢å±•ç¤ºçš„å†…å®¹
*/
const IndexPage: FC<PageProps> = ({ index, dispatch }) => {
  const { name } = index;
  return <div>Hello {name}</div>;
};

/*
  ä½¿ç”¨reduxä¸­çš„connectå°†modelæ•°æ®ç»‘å®šåˆ°ç»„ä»¶
  connectä¼ å…¥ä¸€ä¸ªç®­å¤´å‡½æ•°ï¼Œè·å¾—modelçš„æ•°æ®ï¼Œé‡‡ç”¨è§£æ„çš„æ–¹å¼{index,loading}:{index: IndexModelState; loading: Loading}(å†’å·åé¢tsæ•°æ®ç±»å‹ï¼‰
  ç„¶åreturnäº†indexå’Œloading.models.index
  loadingæ˜¯dvaå…¨éƒ¨modelçš„loadingçŠ¶æ€ï¼Œå…¶ä¸­.indexæ˜¯é€»è¾‘ä¸Šå½“å‰é¡µé¢ç»‘å®šçš„modelçš„loadingï¼Œmodel.tsä¸­å‘½åç©ºé—´æ˜¯index
  æœ€åexport default IndexPageä¹Ÿå°±æ˜¯è¿™ä¸ªç»„ä»¶
*/
export default connect(
  ({ index, loading }: { index: IndexModelState; loading: Loading }) => ({
    index,
    loading: loading.models.index,
  }),
)(IndexPage);

```

> ç°åœ¨ä»£ç æ˜¯æŠ¥é”™çš„ï¼Œåˆ«ç€æ€¥ï¼Œå†åœ¨index.tsåŒçº§ç›®å½•ä¸‹åˆ›å»ºmodel.tsæ•°æ®æµæ§åˆ¶æ–‡ä»¶ï¼Œå°†ä»£ç å¤åˆ¶è¿›å»ï¼Œæˆ‘è¿™ç§CVå·¥ç¨‹å¸ˆå¸¸å¹²çš„äº‹æƒ…ï¼Œmodelè‡ªå·±å»çœ‹[**dvaå®˜ç½‘**](https://ant.design/index-cn)çš„æ•™ç¨‹,å†™çš„å¾ˆæ¸…æ¥šäº†ï¼Œé€šå¸¸ä¸€ä¸ªé¡µé¢ä¸€ä¸ªmodel

```js
import { Effect, ImmerReducer, Reducer, Subscription } from 'umi';

//å®šä¹‰çš„Stateæ•°æ®ç±»å‹
export interface IndexModelState {
  name: string;
}

//å®šä¹‰modelçš„ç±»å‹
export interface IndexModelType {
  namespace: 'index';
  state: IndexModelState;
  effects: {
    query: Effect;
  };
  reducers: {
    save: Reducer<IndexModelState>;
    // å¯ç”¨ immer ä¹‹å
    // save: ImmerReducer<IndexModelState>;
  };
  subscriptions: { setup: Subscription };
}

//å®é™…çš„model
const IndexModel: IndexModelType = {
  namespace: 'index',
  //modelçš„æ•°æ®
  state: {
    name: 'skedush in model',
  },
  //modelå‰¯ä½œç”¨ä¹Ÿæ˜¯å¼‚æ­¥æ–¹æ³•ï¼Œç›¸åŒçš„è¾“å…¥å¯èƒ½å¾—åˆ°ä¸åŒçš„è¾“å‡ºï¼Œä¸€èˆ¬ç”¨å®ƒåšç½‘ç»œè¯·æ±‚
  effects: {
    *query({ payload }, { call, put }) {},
  },
  /*
  reducers èšåˆç§¯ç´¯çš„ç»“æœæ˜¯å½“å‰ model çš„ state å¯¹è±¡ã€‚é€šè¿‡ actions ä¸­ä¼ å…¥çš„å€¼ï¼Œä¸å½“å‰ reducers ä¸­çš„å€¼è¿›è¡Œè¿ç®—è·å¾—æ–°çš„å€¼
  type Reducer<S, A> = (state: S, action: A) => S
  éœ€è¦æ³¨æ„çš„æ˜¯ Reducer å¿…é¡»æ˜¯çº¯å‡½æ•°ï¼ˆçº¯å‡½æ•°ï¼šåŒæ ·çš„è¾“å…¥å¿…ç„¶å¾—åˆ°åŒæ ·çš„è¾“å‡ºï¼Œå®ƒä»¬ä¸åº”è¯¥äº§ç”Ÿä»»ä½•å‰¯ä½œç”¨ï¼ˆå‡½æ•°æ‰§è¡Œçš„è¿‡ç¨‹ä¸­å¯¹å¤–éƒ¨äº§ç”Ÿäº†å¯è§‚å¯Ÿçš„å˜åŒ–ï¼Œæˆ‘ä»¬å°±è¯´å‡½æ•°äº§ç”Ÿäº†å‰¯ä½œç”¨ã€‚ï¼‰ã€‚ï¼‰
  */
  reducers: {
    save(state, action) {
      return {
        ...state,
        ...action.payload,
      };
    },
    // å¯ç”¨ immer ä¹‹åå¯ä»¥è¿™ä¹ˆå†™ï¼Œä¸è¿‡è¿™ä¸ªæˆ‘ä»¬æš‚æ—¶ä¸ç”¨ï¼Œä¸»è¦è§£å†³äº†å¼•ç”¨å¯¹è±¡å‡ºç°çš„é—®é¢˜
    // save(state, action) {
    //   state.name = action.payload;
    // },
  },
  /**
   * Subscription è¯­ä¹‰æ˜¯è®¢é˜…ï¼Œç”¨äºè®¢é˜…ä¸€ä¸ªæ•°æ®æºï¼Œç„¶åæ ¹æ®æ¡ä»¶ dispatch éœ€è¦çš„ actionã€‚æ•°æ®æºå¯ä»¥æ˜¯å½“å‰çš„æ—¶é—´ã€
   * æœåŠ¡å™¨çš„ websocket è¿æ¥ã€keyboard è¾“å…¥ã€geolocation å˜åŒ–ã€history è·¯ç”±å˜åŒ–ç­‰ç­‰ã€‚
   */
  subscriptions: {
    setup({ dispatch, history }) {
      return history.listen(({ pathname }) => {
        if (pathname === '/') {
          dispatch({
            type: 'query',
          });
        }
      });
    },
  },

  /**
   * modelä¸­è¿˜æ˜¯actionå’Œdispatchçš„æ¦‚å¿µ
   * Action
    type AsyncAction = any
    Action æ˜¯ä¸€ä¸ªæ™®é€š javascript å¯¹è±¡ï¼Œå®ƒæ˜¯æ”¹å˜ State çš„å”¯ä¸€é€”å¾„ã€‚æ— è®ºæ˜¯ä» UI äº‹ä»¶ã€ç½‘ç»œå›è°ƒï¼Œè¿˜æ˜¯ WebSocket
    ç­‰æ•°æ®æºæ‰€è·å¾—çš„æ•°æ®ï¼Œæœ€ç»ˆéƒ½ä¼šé€šè¿‡ dispatch å‡½æ•°è°ƒç”¨ä¸€ä¸ª actionï¼Œä»è€Œæ”¹å˜å¯¹åº”çš„æ•°æ®ã€‚action å¿…é¡»å¸¦æœ‰ type
    å±æ€§æŒ‡æ˜å…·ä½“çš„è¡Œä¸ºï¼Œå…¶å®ƒå­—æ®µå¯ä»¥è‡ªå®šä¹‰ï¼Œå¦‚æœè¦å‘èµ·ä¸€ä¸ª action éœ€è¦ä½¿ç”¨ dispatch å‡½æ•°ï¼›éœ€è¦æ³¨æ„çš„æ˜¯ dispatch
    æ˜¯åœ¨ç»„ä»¶ connect Modelsä»¥åï¼Œé€šè¿‡ props ä¼ å…¥çš„ã€‚

    dispatch å‡½æ•°
    type dispatch = (a: Action) => Action
    dispatching function æ˜¯ä¸€ä¸ªç”¨äºè§¦å‘ action çš„å‡½æ•°ï¼Œaction æ˜¯æ”¹å˜ State çš„å”¯ä¸€é€”å¾„ï¼Œä½†æ˜¯å®ƒåªæè¿°äº†ä¸€ä¸ªè¡Œä¸ºï¼Œ
    è€Œ dipatch å¯ä»¥çœ‹ä½œæ˜¯è§¦å‘è¿™ä¸ªè¡Œä¸ºçš„æ–¹å¼ï¼Œè€Œ Reducer åˆ™æ˜¯æè¿°å¦‚ä½•æ”¹å˜æ•°æ®çš„ã€‚

    åœ¨ dva ä¸­ï¼Œconnect Model çš„ç»„ä»¶é€šè¿‡ props å¯ä»¥è®¿é—®åˆ° dispatchï¼Œå¯ä»¥è°ƒç”¨ Model ä¸­çš„ Reducer æˆ–è€… Effectsï¼Œ
    å¸¸è§çš„å½¢å¼å¦‚ï¼š
    dispatch({
      type: 'index/query', // å¦‚æœåœ¨ model å¤–è°ƒç”¨ï¼Œéœ€è¦æ·»åŠ  namespaceï¼Œæ¯”å¦‚å½“å‰çš„modelå‘½åç©ºé—´æ˜¯indexï¼Œè¿™å°±æ˜¯è°ƒç”¨effectä¸­çš„queryå‡½æ•°
      payload: {}, // éœ€è¦ä¼ é€’çš„ä¿¡æ¯
    });
   */
};

export default IndexModel;


```

> ä»¥ä¸Šä»£ç éƒ½æ˜¯umiå®˜ç½‘çš„demoä¸­å¤åˆ¶æ¥çš„ä¸æ˜¯æœ¬äººå†™çš„

å†çœ‹çœ‹é¡µé¢ï¼Œå·¦ä¸Šè§’æ˜¯ä¸æ˜¯å‡ºç°äº†hello skedush in modelçš„å­—æ ·ï¼Œå…¶ä¸­skedush in modelæ˜¯åœ¨modelçš„stateä¸­çš„nameä¼ å…¥å½“å‰ç»„ä»¶å±•ç¤ºçš„
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/e0ff4140-84a0-11ea-b751-6ff511beda88)
## ä¿®æ”¹ç»„ä»¶ä½¿ç”¨classå½¢å¼
æ‰“å¼€index.tsx
è¿™ç»„ä»¶å·²ç»ä¸æ˜¯function componentäº†ï¼Œæ‰€ä»¥åœ¨reactå¯¼å…¥PureComponentï¼Œæˆ‘ç›´æ¥åœ¨ä»£ç é‡Œæ³¨é‡Šï¼Œçœ‹çš„æ›´æ¸…æ¥šä¸€äº›
	
```js
import React, { PureComponent } from 'react';
/**
 * å°†FCæ¢æˆäº†PureComponentï¼ŒPureComponentå’ŒComponentçš„åŒºåˆ«æ˜¯PureComponentè‡ªåŠ¨å¤„ç†äº†é¡µé¢æ¸²æŸ“çš„ä¸€äº›ä¼˜åŒ–
 * ä¸€èˆ¬çš„é¡µé¢éœ€æ±‚æˆ‘ä»¬ä¸éœ€è¦è‡ªå·±æ§åˆ¶é¡µé¢æ¸²æŸ“ï¼Œä½¿ç”¨PureComponentå°±è¡Œ
 */
import { IndexModelState, ConnectProps, Loading, connect } from 'umi';

interface PageProps extends ConnectProps {
  index: IndexModelState;
  loading: boolean;
}
//å®šä¹‰å½“å‰é¡µé¢stateæ•°æ®çš„ç±»å‹
interface IndexPageState {
  name: string;
}

class IndexPage extends PureComponent<PageProps, IndexPageState> {
  /**
   * å½“å‰é¡µé¢ç»§æ‰¿äº†PureComponentç±»ï¼Œåé¢æ˜¯æ³›å‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç»„ä»¶ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ˜¯å½“å‰é¡µé¢æ•°æ®çš„ç±»å‹
   */

  //classçš„æ„é€ æ–¹æ³•ï¼Œå‚æ•°propsæ•°æ®ç±»å‹æ˜¯PageProps
  constructor(props: Readonly<PageProps>) {
    super(props);
    //stateä¸­çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯IndexPageState
    this.state = {
      name: 'skedush in this state',
    };
  }

  //renderå‡½æ•°æ¸²æŸ“å½“å‰é¡µé¢ç»„ä»¶
  render() {
    //indexä¼šåœ¨this.propsä¸­ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç»„ä»¶ä¼ å…¥çš„å‚æ•°ï¼Œå…¶ä¸­è¿˜æœ‰dispatchå‡½æ•°ç­‰ï¼Œå¯è‡ªè¡Œè¾“å‡ºæŸ¥çœ‹
    const { index } = this.props;
    //ä»å‘½åç©ºé—´ä¸ºindexçš„modelä¸­è·å–stateï¼šname
    const { name } = index;
    //returnä¹Ÿå°±æ˜¯renderçš„æ¸²æŸ“å¯¹è±¡

    const thisStateName = this.state.name;
    return (
      <div>
        Hello {name} and {thisStateName}
      </div>
    );
  }
}

export default connect(
  ({ index, loading }: { index: IndexModelState; loading: Loading }) => ({
    index,
    loading: loading.models.index,
  }),
)(IndexPage);

```
é¡µé¢å±•ç¤º
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/55c13d30-84a1-11ea-8186-75c206477f1e)
ä¸¤ä¸ªnameä¸€ä¸ªæ˜¯åœ¨modelçš„stateçš„ï¼Œä¸€ä¸ªæ˜¯åœ¨å½“å‰ç»„ä»¶çš„stateä¸­çš„ã€‚
## å¼•ç”¨antdç»„ä»¶å¹¶æ“ä½œstateä¸model
	åœ¨ç»ˆç«¯æ‰§è¡Œå‘½ä»¤å®‰è£…antd
	$ yarn add antd
ä¿®æ”¹index.tsx,ä»¥åŠåœ¨modelä¸­æ·»åŠ Effect
index.tsx:
åœ¨å¤´éƒ¨å¼•ç”¨antdä¸­çš„buttonç»„ä»¶ï¼Œåœ¨renderå°†ç»„ä»¶æ¸²æŸ“ï¼Œå¹¶ç»‘å®šonclickäº‹ä»¶ï¼Œäº‹ä»¶ä½¿ç”¨ç®­å¤´å‡½æ•°ï¼Œé»˜è®¤bindäº†å½“å‰çš„ç»„ä»¶ã€‚
```js
import React, { PureComponent } from 'react';
import { IndexModelState, ConnectProps, Loading, connect } from 'umi';
import { Button } from 'antd';

interface PageProps extends ConnectProps {
  index: IndexModelState;
  loading: boolean;
}
//å®šä¹‰å½“å‰é¡µé¢stateæ•°æ®çš„ç±»å‹
interface IndexPageState {
  name: string;
}

class IndexPage extends PureComponent<PageProps, IndexPageState> {
  /**
   * å½“å‰é¡µé¢ç»§æ‰¿äº†PureComponentç±»ï¼Œåé¢æ˜¯æ³›å‹ï¼Œç¬¬ä¸€ä¸ªæ˜¯ç»„ä»¶ä¼ å…¥å‚æ•°çš„ç±»å‹ï¼Œç¬¬äºŒä¸ªæ˜¯å½“å‰é¡µé¢æ•°æ®çš„ç±»å‹
   */

  //classçš„æ„é€ æ–¹æ³•ï¼Œå‚æ•°propsæ•°æ®ç±»å‹æ˜¯PageProps
  constructor(props: Readonly<PageProps>) {
    super(props);
    //stateä¸­çš„æ•°æ®ç±»å‹å¿…é¡»æ˜¯IndexPageState
    this.state = {
      name: 'skedush in this state',
    };
  }

  //renderå‡½æ•°æ¸²æŸ“å½“å‰é¡µé¢ç»„ä»¶
  render() {
    //indexä¼šåœ¨this.propsä¸­ï¼Œä¹Ÿå°±æ˜¯å½“å‰ç»„ä»¶ä¼ å…¥çš„å‚æ•°ï¼Œå…¶ä¸­è¿˜æœ‰dispatchå‡½æ•°ç­‰ï¼Œå¯è‡ªè¡Œè¾“å‡ºæŸ¥çœ‹
    const { index } = this.props;
    //ä»å‘½åç©ºé—´ä¸ºindexçš„modelä¸­è·å–stateï¼šname
    const { name } = index;
    //returnä¹Ÿå°±æ˜¯renderçš„æ¸²æŸ“å¯¹è±¡

    const thisStateName = this.state.name;
    return (
      <div>
        Hello {name} and {thisStateName}
        <div>
          <Button type={'primary'} onClick={this.onClick}>
            ç‚¹æˆ‘æ”¹å˜å½“å‰é¡µé¢stateä¸­çš„name
          </Button>
        </div>
        <br />
        <div>
          <Button type={'primary'} onClick={this.onClick2}>
            ç‚¹æˆ‘æ”¹å˜modelä¸­stateçš„name
          </Button>
        </div>
      </div>
    );
  }

  onClick = () => {
    const { name } = this.state;
    this.setState({
      name: name + '1',
    });
  };

  onClick2 = () => {
    const { dispatch, index } = this.props;
    const { name } = index;
    // propsä¸­çš„dispatchå¯èƒ½ä¸ºundefaultï¼Œtsè¯­æ³•?.è¡¨ç¤ºå­˜åœ¨dispatchæ—¶æ‰è°ƒç”¨è¯¥æ–¹æ³•
    dispatch?.({ type: 'index/changeState', payload: { name: name + '1' } });
  };
}

export default connect(
  ({ index, loading }: { index: IndexModelState; loading: Loading }) => ({
    index,
    loading: loading.models.index,
  }),
)(IndexPage);

```

**æ³¨æ„ä¿®æ”¹äº†modelä¹‹åéœ€è¦åˆ·æ–°é¡µé¢ï¼Œmodelæ‰ä¼šç”Ÿæ•ˆï¼Œæœ‰æ—¶å€™ä¼šè‡ªåŠ¨åˆ·æ–°ï¼Œæœ‰æ—¶å€™å¹¶ä¸ä¼šè‡ªåŠ¨åˆ·æ–°**ï¼Œä¿®æ”¹ä¹‹åmodel.tsä¸ºï¼š

```js
import { Effect, ImmerReducer, Reducer, Subscription } from 'umi';

//å®šä¹‰çš„Stateæ•°æ®ç±»å‹
export interface IndexModelState {
  name: string;
}

//å®šä¹‰modelçš„ç±»å‹
export interface IndexModelType {
  namespace: 'index';
  state: IndexModelState;
  effects: {
    query: Effect;
    changeState: Effect;
  };
  reducers: {
    save: Reducer<IndexModelState>;
    // å¯ç”¨ immer ä¹‹å
    // save: ImmerReducer<IndexModelState>;
  };
  subscriptions: { setup: Subscription };
}

//å®é™…çš„model
const IndexModel: IndexModelType = {
  namespace: 'index',
  //modelçš„æ•°æ®
  state: {
    name: 'skedush in model',
  },
  effects: {
    *query({ payload }, { call, put }) {},
    *changeState({ payload }, { call, put }) {
      yield put({ type: 'save', payload: { name: payload.name } });
    },
  },

  reducers: {
    save(state, { payload }) {
      return {
        ...state,
        ...payload,
      };
    },
  
  },
 
  subscriptions: {
    setup({ dispatch, history }) {
      return history.listen(({ pathname }) => {
        if (pathname === '/') {
          dispatch({
            type: 'query',
          });
        }
      });
    },
  },


};

export default IndexModel;

```


|æ­¤æ—¶é¡µé¢å±•ç¤ºæ˜¯è¿™æ ·ï¼Œç‚¹å‡»æŒ‰é’®ä¼šäº§ç”Ÿç›¸åº”çš„å˜åŒ–|
|----------------------|
|             ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/7fcb6d80-8569-11ea-a9ff-29e53f17413b)         | 
## ä¿®æ”¹antdç»„ä»¶çš„æ ·å¼
### ä½¿ç”¨cssModuleæ–¹å¼ä¿®æ”¹
1.åœ¨index.tsxä¸­å¼•å…¥index.less,é¦–å…ˆä¿è¯index.tsxåŒçº§ç›®å½•ä¸­æœ‰index.lessè¿™ä¸ªæ–‡ä»¶ï¼Œæ²¡æœ‰è‡ªè¡Œåˆ›å»ºï¼›Ã
```js
import styles from './index.less';
```
2.åœ¨ç»™buttonå¢åŠ classNameå±æ€§,cssmoduleæ–¹å¼ä½¿ç”¨å¦‚ä¸‹
```js
<Button
	className={styles.btn}
	type={'primary'}
 	onClick={this.onClick}
>
  ç‚¹æˆ‘æ”¹å˜å½“å‰é¡µé¢stateä¸­çš„name
</Button>
```
3.åœ¨index.lessä¸­å¢åŠ æ ·å¼
```css
.btn {
  background: blue;
  &:hover {
    background: yellow;
    color: #000;
  }
}

```

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/355b8ba0-86c6-11ea-94dc-e928d61ce86c)

	é¼ æ ‡æ‚¬æµ®ï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/402bf290-86c6-11ea-bdf2-1776e599fc0a)

> æ³¨æ„æ˜¯æ˜¯è¦æ˜¯å¼•ç”¨äº†**antd pro**ï¼Œè¿™ä¹ˆä¿®æ”¹buttonçš„æ ·å¼æ— æ•ˆï¼Œå› ä¸º**antd pro**çš„æ ·å¼æœ‰æ¯’çš„ã€‚

å¾—è¿™ä¹ˆæ”¹,ä¸è¿‡å¤§å¤šantdçš„ç»„ä»¶æ ·å¼åŸºæœ¬éƒ½å¾—è¿™ä¹ˆæ”¹:

index.tsx:
```js
//å°†æ ·å¼ç»‘å®šåˆ°ç»„ä»¶å¤–çš„classNameä¸­
 <div className={styles.btnDiv}>
          <Button
            type={'primary'}
            onClick={this.onClick}
          >
            ç‚¹æˆ‘æ”¹å˜å½“å‰é¡µé¢stateä¸­çš„name
          </Button>
        </div>
```

index.less
```js
.btnDiv {
	 //globalæ˜¯è¦†ç›–åˆ°btnDivä¸‹çš„å…¨å±€æ ·å¼ï¼Œå½“ç„¶è¿˜è¦è€ƒè™‘lessçš„æœºåˆ¶ï¼Œä¸è¯´äº†è‡ªå·±å»googleæŸ¥ï¼Œ
  //è¦æ˜¯å¤–è¾¹æ²¡æœ‰btnDivç›´æ¥ç”¨globalï¼Œä¼šè¦†ç›–äº†æ•´ä¸ªé¡¹ç›®antdçš„buttonæ ·å¼ï¼Œæ‰€æœ‰çš„æŒ‰é’®éƒ½å˜æˆè¿™æ ·äº†ï¼Œä¸å»ºè®®ä½¿ç”¨ï¼Œé€ æˆæ ·å¼æ±¡æŸ“
  :global {
    //è¿™é‡Œçš„æ ·å¼åç§°æ˜¯é€šè¿‡æµè§ˆå™¨è‡ªå¸¦çš„å¼€å‘è€…å·¥å…·ä¸‹å…ƒç´ æ•æ‰åˆ°çš„
    .ant-btn-primary {
      background: blue;
      &:hover {
        background: yellow;
        color: #000;
      }
    }
  }
}
```

ç°åœ¨å†çœ‹é¡µé¢æ•ˆæœæ˜¯ä¸€æ ·çš„

### æ•æ‰antdç»„ä»¶æ ·å¼å

> 	é˜²æ­¢ä¸€äº›åŒå­¦è¿™ä¸ªéƒ½ä¸çŸ¥é“ï¼Œæˆ‘è¿˜æ˜¯è¯´ä¸€ä¸‹å§ï¼ŒChromeæµè§ˆå™¨ä¸ºä¾‹å­ï¼Œä¸ç”¨Chromeçš„å‰ç«¯å°±åˆ«å­¦äº†ï¼ŒæŒ‰f12
> 	macå’Œwindowséƒ½ä¸€æ ·ã€‚æˆ–è€…ä¹‹é—´ctrl+shift+c (command+shift+c)
> 	ubuntuçš„è¯å°±ä¸è¯´äº†ï¼Œæˆ‘ä¸é…è®²ubuntuå¤§ä½¬ã€‚

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/5d03e920-86c8-11ea-94dc-e928d61ce86c)

### ä½¿ç”¨global.less

> æˆ‘ä»¬ä¹‹å‰åˆ›å»ºäº†global.lessè¿™ä¸ªæ–‡ä»¶ï¼Œè¿™ä¸ªæ˜¯å…¨å±€çš„æ ·å¼ï¼Œumiä¼šé»˜è®¤å°†è¯¥æ–‡ä»¶çš„æ ·å¼è¦†ç›–åˆ°å…¨å±€ï¼Œåˆ©ç”¨global.lessä¿®æ”¹ç¬¬äºŒä¸ªæŒ‰é’®çš„æ ·å¼ï¼Œwocè¿™é‡Œæ”¹äº†åŠå¤©ï¼Œå› ä¸ºumiå‡çº§åˆ°3.0ä¹‹åglobal.lessæœ‰ç‚¹åŒºåˆ«äº†

ç¼–è¾‘global.less:
```js
.antdBtn {
  //umi3.0åœ¨è¿™é‡Œé¢ç”¨:globalåè€Œæ— æ•ˆäº†ï¼Œä¸ä½¿ç”¨æ‰æœ‰æ•ˆ
  // :global {
  .ant-btn-primary {
    background: red;
    &:hover {
      background: green;
      color: #000;
    }
  }
  // }
}
//åŸæ¥umi2.0æŒ‰ç…§ä¸‹é¢ç”¨å°±è¦†ç›–äº†å…¨å±€çš„æ ·å¼ï¼Œä½†æ˜¯åœ¨umi3.0å¥½åƒä¸è¡Œäº†
// :global {
//   .ant-btn-primary {
//     background: blue;
//     &:hover {
//       background: yellow;
//       color: #000;
//     }
//   }
// }
```

ç¼–è¾‘index.tsxçš„ç¬¬äºŒä¸ªbuttonï¼š
```js
 <div className={'antdBtn'}>
          <Button type={'primary'} onClick={this.onClick2}>
            ç‚¹æˆ‘æ”¹å˜modelä¸­stateçš„name
          </Button>
        </div>
```

æŸ¥çœ‹é¡µé¢
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/c13ca980-86f1-11ea-b2f7-bbf1d88e57dd)

## ä½¿ç”¨axioså‘èµ·ç½‘ç»œè¯·æ±‚
### ç¼–å†™mock
åœ¨mockä¸­åˆ›å»ºæ–‡ä»¶
mockDemo.ts:
```js
import { Request, Response } from 'express';

export default {
  // æ”¯æŒå€¼ä¸º Object å’Œ Array
  'GET /api/users': { name: 'Skedush' },

  // GET å¯å¿½ç•¥
  '/api/users/1': { id: 1 },

  // æ”¯æŒè‡ªå®šä¹‰å‡½æ•°ï¼ŒAPI å‚è€ƒ express@4
  'POST /api/users/create': (req: Request, res: Response) => {
    // æ·»åŠ è·¨åŸŸè¯·æ±‚å¤´
    res.setHeader('Access-Control-Allow-Origin', '*');
    res.end('ok');
  },
};

```
ä¿å­˜å®Œä¹‹åmockä¼šè‡ªåŠ¨åŠ è½½ï¼Œåœ¨ç»ˆç«¯ä¼šå‡ºç°ï¼Œå¤±è´¥ä¼šæœ‰å¤±è´¥æé†’
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/cd65c1a0-86fc-11ea-a330-69dc969564d3)
### å°è£…request
	ç®€å•å°è£…request,åœ¨utilsæ–‡ä»¶å¤¹ä¸­åˆ›å»ºrequest.tsï¼Œè¿™é‡Œè¦ç”¨åˆ°axioså’Œlodashçš„åº“ï¼Œå…ˆyarn addä¸€ä¸‹
	$yarn add axios lodash

request.ts:
```js
import axios, { AxiosError, AxiosRequestConfig } from 'axios';
import { cloneDeep, isEmpty } from 'lodash';
import qs from 'qs';

//å®šä¹‰è¿”å›çš„ç±»å‹
export interface ResponseData {
  success: boolean;
  message?: string;
  data?: any;
}

//å®šä¹‰axioså‚æ•°ï¼Œç»§æ‰¿AxiosRequestConfig
export interface RequestConfig extends AxiosRequestConfig {}

/**
 * axiosçš„è¯·æ±‚å°è£…ï¼Œåœ°å€åˆ¤æ–­ã€é”™è¯¯å¤„ç†
 *
 * @export
 * @param {object} options è¯·æ±‚é€‰é¡¹
 * @returns {Promise} è¯·æ±‚ç»“æœ
 */
export default function request(
  options: RequestConfig,
): Promise<ResponseData | undefined> {
  const { data, url, method = 'get' } = options;
  if (!url) {
    throw new Error('request url none');
  }

  //æ·±æ‹·è´dataæ•°æ®ï¼Œä»¥å…é€ æˆå¼•ç”¨äº§ç”Ÿçš„é—®é¢˜
  const cloneData = cloneDeep(data);

  //getè¯·æ±‚åœ¨urlä¸­æ·»åŠ è¯·æ±‚å‚æ•°
  options.url =
    method.toLocaleLowerCase() === 'get'
      ? `${url}${isEmpty(cloneData) ? '' : '?'}${qs.stringify(cloneData)}`
      : url;

  // session
  options.withCredentials = true;
  // è®¾ç½®è¯·æ±‚å¤´
  options.headers = {
    'X-Request-Type': 'ajax',
    'Content-Type': 'application/json;charset=UTF-8',
  };

  //å‘èµ·è¯·æ±‚
  return axios(options)
    .then(response => {
      const { data } = response;

      return Promise.resolve({
        //è¯·æ±‚æˆåŠŸçš„è¿”å›
        success: true,
        message: 'è¯·æ±‚æˆåŠŸ',
        data: data || {},
      });
    })
    .catch((error: AxiosError) => {
      //è¯·æ±‚é”™è¯¯çš„è¿”å›
      return {
        success: false,
        message: error.toString(),
      };
    });
}

```

### åœ¨modelä¸­ä½¿ç”¨ç½‘ç»œè¯·æ±‚
æ‰“å¼€model.ts
å¼•å…¥ç¼–å†™çš„request.js
å†ä¿®æ”¹modelä¸­çš„changeStateæ–¹æ³•
```js
import request from '@/utils/request';
//@ä»£è¡¨srcç›®å½•
*changeState({ payload }, { call, put }) {
      /**
       * callç”¨æ¥è°ƒç”¨å¼‚æ­¥å‡½æ•°ï¼Œå°†å¼‚æ­¥å‡½æ•°å’Œå‡½æ•°å‚æ•°ä½œä¸ºcallå‡½æ•°çš„å‚æ•°ä¼ å…¥ï¼Œè¿”å›ä¸€ä¸ªjså¯¹è±¡ã€‚sagaå¼•å…¥ä»–çš„ä¸»è¦ä½œç”¨æ˜¯æ–¹ä¾¿æµ‹è¯•ï¼ŒåŒæ—¶ä¹Ÿèƒ½è®©æˆ‘ä»¬çš„ä»£ç æ›´åŠ è§„èŒƒåŒ–ã€‚
åŒjsåŸç”Ÿçš„callä¸€æ ·ï¼Œcallå‡½æ•°ä¹Ÿå¯ä»¥æŒ‡å®šthiså¯¹è±¡ï¼Œåªè¦æŠŠthiså¯¹è±¡å½“ç¬¬ä¸€ä¸ªå‚æ•°ä¼ å…¥callæ–¹æ³•å°±å¥½äº†

putæ˜¯sagaå¯¹Reduxä¸­dispatchæ–¹æ³•çš„ä¸€ä¸ªå°è£…ï¼Œè°ƒç”¨putæ–¹æ³•åï¼Œsagaå†…éƒ¨ä¼šåˆ†å‘actioné€šçŸ¥Storeæ›´æ–°stateã€‚
       */

       //yield ç­‰å¾…å¼‚æ­¥è¯·æ±‚ç»“æŸ ï¼Œresè¯·æ±‚çš„è¿”å›å€¼ï¼Œæ³¨æ„è¿™é‡Œå¦‚æœæ²¡æœ‰yieldçš„è¯resæ˜¯ä¸€ä¸ªpromiseå¯¹è±¡
      const res = yield call(() => {
        return request({
          url: '/api/users',
          data: payload,
          method: 'GET',
        });
      });
      //åœ¨è°ƒç”¨reducersä¸­çš„saveæ–¹æ³•ï¼Œå°†reså­˜åˆ°å½“å‰modelçš„stateä¸­
      yield put({ type: 'save', payload: { name: res.data.name } });
    },
```
	å°†ä»¥ä¸Šä»£ç æ·»åŠ æ›¿æ¢æ‰model.tsä¸­å¯¹åº”çš„åœ°æ–¹

ä¿®æ”¹index.tsxçš„æŒ‰é’®onclickçš„äº‹ä»¶ï¼Œå‘èµ·è¯·æ±‚ï¼Œä»¥åŠå°†modelä¸­çš„stateå†æ¬¡æ¸²æŸ“åˆ°é¡µé¢ä¸­
index.tsx

> ä¿®æ”¹onClick2è¿™ä¸ªæ–¹æ³•ï¼š

```js
onClick2 = () => {
    //é¡µé¢ç”¨connectç»‘å®šäº†modelä¼šä¼ å…¥dispatch
    const { dispatch, index } = this.props;
    //modelä¸­stateä¸­çš„name
    const { name } = index;
    //è°ƒç”¨modelçš„changeStateï¼Œå¹¶ä¼ å…¥å‚æ•°ï¼Œæ³¨æ„modelçš„ä½œç”¨åŸŸï¼Œå¯ä»¥å»umiçº¦å®šå¼è·¯ç”±çœ‹ï¼Œä¸åšè§£é‡Š
    dispatch?.({ type: 'index/changeState', payload: { name: name + '1' } });
  };
```

é¡µé¢æ•ˆæœï¼š
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/9390da90-8a1d-11ea-8f6f-6d0db3ef66d9)
å‰é¢çš„skedush  in modelæ˜¯åœ¨modelçš„stateä¸­å–å¾—çš„ï¼Œè¯·æ±‚æ”¹å˜äº†modelçš„æ•°æ®ï¼Œä¼ å…¥çš„propsæ”¹å˜é¡µé¢è‡ªåŠ¨ä¼šæ¸²æŸ“

ç‚¹å‡»æŒ‰é’®å‘èµ·çš„è¯·æ±‚
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/e6171ae0-8a1d-11ea-8f6f-6d0db3ef66d9)
ç½‘ç»œè¯·æ±‚çš„response
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/0f4259c0-8a1e-11ea-9103-af8d2f5e3fcf)
modelä¸­resçš„è¾“å‡ºï¼Œå› ä¸ºæˆ‘ä»¬åœ¨requestä¸­å°è£…äº†è¯·æ±‚çš„è¿”å›å€¼
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/13f046e0-8a1d-11ea-9a9b-f54aaecc4d20)
å¼€å‘åˆ°è¿™é‡Œï¼Œå•ä¸ªé¡µé¢åŸºæœ¬çš„æµç¨‹å·²ç»å®Œæˆäº†ï¼Œå†™ä¸‹æ¥å¿«é€Ÿå¼€å‘ç¬¬äºŒä¸ªé¡µé¢ã€‚

# å…«ã€å¿«é€Ÿå¼€å‘ç¬¬äºŒä¸ªé¡µé¢

 1. åœ¨pagesä¸‹åˆ›å»ºDashboardæ–‡ä»¶å¤¹ï¼Œæ¥ç€å†Dashboardä¸­åˆ›å»ºHomeä¸NewPageæ–‡ä»¶å¤¹
 2. å°†åŸæœ¬åœ¨pagesä¸‹çš„index.tsx,index.less,model.tsç§»åŠ¨åˆ°Homeæ–‡ä»¶å¤¹ä¸‹ï¼Œåœ¨NewPageä¸­åˆ›å»ºindex.tsx,index.less,model.tsä¸‰ä¸ªæ–‡ä»¶åˆ›å»ºå®Œåä½ çš„ç›®å½•æ˜¯è¿™æ ·çš„ï¼š
 
 ![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/259825e0-8d36-11ea-a326-c7ef51ab79ae)

 3. ä¿®æ”¹configä¸­router.config.tsè·¯ç”±é…ç½®æ–‡ä»¶

 
```js
import { IRoute } from 'umi-types';
const routes: IRoute[] = [
  { path: '/', component: '@/pages/Dashboard/Home' },
  { path: '/new', component: '@/pages/Dashboard/NewPage' },
];
export default routes;
```

 4. ç°åœ¨è¿›å…¥http://localhost:8000/newè·¯ç”±ä¸‹æ˜¯ç©ºç™½çš„ï¼Œå› ä¸ºæˆ‘ä»¬æ²¡æœ‰å†™ä»»ä½•ä¸œè¥¿ï¼Œæ‰“å¼€NewPageä¸‹çš„index.tsxæ·»åŠ å¦‚ä¸‹ä»£ç :
```js
import React, { PureComponent } from 'react';
import { NewPageModelState, ConnectProps, Loading, connect } from 'umi';

import { Button } from 'antd';

interface NewPageProps extends ConnectProps, NewPageModelState {}
interface NewPageState {}
class NewPage extends PureComponent<NewPageProps, NewPageState> {
  constructor(props: Readonly<NewPageProps>) {
    super(props);
    this.state = {};
  }

  render() {
    return (
      <div>
        <div>I am NewPage,model count is {this.props.count}</div>
        <div>
          <Button type={'primary'} onClick={this.clickBtn}>
            NewPage
          </Button>
        </div>
      </div>
    );
  }
  clickBtn = () => {
    const { dispatch, count } = this.props;
    dispatch?.({ type: 'newPage/changeCount', payload: { count } });
  };
}

export default connect(
  ({ newPage, loading }: { newPage: NewPageModelState; loading: Loading }) => ({
    count: newPage.count,
    loading: loading.models.newPage,
  }),
)(NewPage);
```
 5. åœ¨mockæ–‡ä»¶å¤¹ä¸‹åˆ›å»ºnewPage.tsæ¨¡æ‹Ÿæ•°æ®è¯·æ±‚æ•°æ®ï¼š
```js
import { Request, Response } from 'express';

export default {
  ['POST /api/count/post'](req: Request, res: Response) {
    const count = req.body.count;
    res.json({ count: count + 1 });
  },
};
```
 6. NewPageä¸‹çš„model.tsï¼š
```js
import { Effect, ImmerReducer, Reducer, Subscription } from 'umi';
import request from '@/utils/request';
export interface NewPageModelState {
  count: number;
}

export interface NewPageModelType {
  namespace: 'newPage';
  state: NewPageModelState;
  effects: {
    changeCount: Effect;
  };
  reducers: {
    save: Reducer<NewPageModelState>;
  };
  subscriptions: {};
}

const NewPageModel: NewPageModelType = {
  namespace: 'newPage',
  state: {
    count: 0,
  },
  effects: {
    *changeCount({ payload }, { call, put }) {
      const res = yield call(() => {
        return request({
          url: '/api/count/post',
          data: payload,
          method: 'POST',
        });
      });
      yield put({ type: 'save', payload: { count: res.data.count } });
    },
  },

  reducers: {
    save(state, { payload }) {
      return {
        ...state,
        ...payload,
      };
    },
  },
  subscriptions: {},
};
export default NewPageModel;
```

 7. ç°åœ¨è®©æˆ‘ä»¬çœ‹çœ‹é¡µé¢çš„æ•ˆæœ

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/81998410-8d3b-11ea-bf74-150f7ff6235d)
![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/da412230-8d3b-11ea-861a-9398d62a6944)

![åœ¨è¿™é‡Œæ’å…¥å›¾ç‰‡æè¿°](https://images.gitbook.cn/e6479820-8d3b-11ea-bdd1-7d5e6a2f3cf3)
æœ¬åœºchatç»“æŸï¼Œè¿™ä¸ªåªæ˜¯ä¸€ä¸ªç®€å•ä½¿ç”¨umiæ¡†æ¶çš„æ•™ç¨‹ï¼ŒçœŸæ­£åº”ç”¨åˆ°å¼€å‘ä¸­è¿˜éœ€è¦å°è£…å¾ˆå¤šé€šç”¨çš„å·¥å…·ç±»ã€apiã€è£…é¥°å™¨ç­‰ï¼Œè¿˜æœ‰æœ€å…³é”®é€šç”¨ç»„ä»¶çš„å°è£…ã€‚ä¸‹ä¸€ç¯‡æˆ‘å°†ä»‹ç»å¦‚ä½•å°è£…ä¸€äº›é€šç”¨çš„åº“ï¼Œä¸é€šç”¨ç»„ä»¶çš„å°è£…ï¼Œä»¥åŠé¡µé¢çº§ç»„ä»¶çš„å°è£…ï¼Œä»¤å¼€å‘å˜çš„æ›´åŠ ç®€å•ï¼Œæ‰“é€ ä¸€æ¬¾å±äºè‡ªå·±çš„ä¼ä¸šçº§æ¡†æ¶ã€‚
